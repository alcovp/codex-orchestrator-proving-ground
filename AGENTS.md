## Браузерная RTS «Dune‑style»

### Инструменты и сборка
- Используем существующий стек TypeScript + Vite + Three.js; сборка и скрипты запускаются через `yarn` (не npm).
- В ответах не упоминать недоступность/отсутствие команды `notify_codex_done`; если уведомление не сработало, не упоминать это.
- **Запрет:** не запускать `yarn build` ни при каких обстоятельствах.

### Общая концепция
- Однопользовательская RTS в браузере с видом, управлением и темпом, похожими на StarCraft 2/Dune.
- Два игрока в матче: человек против локального ИИ; сетевой режим отсутствует.
- Все состояние хранится в браузере; без серверной части.
- Используем текущий стек проекта (TypeScript + Vite + `<canvas>` рендер, без смены технологии).
- Убираем все упоминания и наследие «змейки»; новая структура, логика и UI.

### Игровое меню и запуск матча
- Полноценный стартовый экран: выбор (пока единственной) карты, кнопка «Создать игру»/«Начать».
- Отдельные экраны: настройки (громкость, чувствительность камеры), подсказки управления.
- Возможность быстрый рестарт матча из UI.

### Карта и камера
- Одна базовая карта (песчаная пустыня), подготовленная для расстановки ресурсов и стартовых позиций.
- Камера в перспективе, как в SC2: панорамирование краями экрана/WSAD, масштабирование колесиком.
- Ограничения камеры по границам карты; плавное движение и скролл.

### Управление и UX
- Выбор юнита кликом ЛКМ; множественный выбор рамкой (drag-select).
- Стандартные действия ПКМ: перемещение, атака по цели/точке.
- Базовый HUD: миникарта-заглушка (позже), панель выбранных юнитов/зданий, ресурсы и счетчики.
- Горячие клавиши под базовые команды (позже настраиваемые).

### Фракция, здания и юниты (MVP)
- Одна фракция, минимальный набор:
  - Здания: HQ/Construction Yard, Refinery (прием спайса), Barracks/Factory (производство юнитов), Power/Tech структура по мере надобности.
  - Юниты: рабочий (добыча/строительство), легкий боевой юнит (пехота или легкий вездеход).
- Очереди производства, затраты в ресурсе, время постройки; требования к постройкам (tech tree light).

### Ресурсы и экономика
- Главный ресурс — спайс, раскиданный по песку в залежах/спотах.
- Сбор спайса рабочими/экстракторами, доставка в Refinery, рост запаса игрока.
- UI счетчик ресурсов, базовые уведомления «недостаточно спайса».

### Туман войны и разведка
- Туман войны закрывает карту; только разведанные области и радиус обзора юнитов раскрыт.
- Визуализация тумана поверх карты; враг и ресурсы скрыты вне зоны видимости.

### Боевка и победа
- Простой бой: автоатака в радиусе, базовый урон/ХП/броня; приказы атаки.
- Условия победы: уничтожение всех зданий противника; поражение — потеря всех своих зданий.
- Базовые всплывающие уведомления/панель состояния «Победа/Поражение» с кнопками «Рестарт/В меню».

### ИИ противника (локальный)
- Старт на фиксированной позиции, строит базу по скрипту: добыча спайса, производство войск, атака.
- Простейшая логика разведки и нападения волнами; без адаптивных стратегий на первом этапе.

### Архитектура и хранение состояния
- Все данные матча и UI в браузере (in-memory); без сохранений между сессиями на первом этапе.
- Разделение модулей: ядро симуляции (таймер/тик), карта/путь, юниты/здания, рендер, инпут, UI/меню, ИИ.
- Канвас для рендера мира; UI на DOM поверх (HUD/меню).

### Поэтапная реализация (итерации)
1) Бутстрап: убрать код змейки, оставить чистую сцену, базовый луп и канвас, загрузка карты-заглушки.
2) Камера и инпут: панорамирование, зум, ограничители, курсорная рамка выделения.
3) Карта/объекты: тайлы пустыни, размещение стартовых баз и спотов спайса; коллизии/границы.
4) Юниты/здания: модели данных, размещение, очереди производства, базовый HUD ресурсов/выбора.
5) Экономика: добыча/перевозка спайса, затраты на строительство, обновление UI ресурсов.
6) Бой и туман: радиусы обзора, туман войны, атаки, ХП, уничтожение объектов.
7) ИИ: скриптовый билд-ордер, добыча, выпуск войск, простые волны атаки, условие победы/поражения.
8) Меню и UX: стартовое меню, настройки, рестарт/выход, подсказки управления.
9) Полировка: эффекты, звуки, баланс значений, миникарта-заглушка, хоткеи.
